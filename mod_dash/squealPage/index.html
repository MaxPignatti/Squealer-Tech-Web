<!DOCTYPE html>
<html lang="it">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>Moderazione Messaggi</title>
		<link
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<script>
			const userData = JSON.parse(localStorage.getItem("userData"));
			if (!userData) {
				window.location.href = "../loginPage/index.html";
			} else {
				fetch(`http://localhost:3500/usr/${userData.username}`)
					.then((response) => {
						if (!response.ok) {
							throw new Error("Network response was not ok");
						}
						return response.json();
					})
					.then((userDetails) => {
						if (!userDetails.isMod) {
							localStorage.removeItem("userData");
							window.location.href = "../loginPage/index.html";
						}
					})
					.catch((error) => {
						console.error(
							"Errore durante il recupero dei dettagli dell'utente:",
							error
						);
					});
			}
		</script>
	</head>
	<body>
		<div class="container mt-5">
			<h1 class="text-center">Message Management Dashboard</h1>
			<div id="filterOptions">
				<input
					type="text"
					id="senderFilter"
					placeholder="Filtra per mittente"
				/>
				<input
					type="date"
					id="dateFilter"
				/>
				<input
					type="text"
					id="recipientFilter"
					placeholder="Filtra per destinatari"
				/>
				<button onclick="applyFilters()">Applica filtri</button>
			</div>

			<div
				id="messageList"
				class="container mt-4"
			></div>
		</div>
		<script src="script.js"></script>
	</body>
</html>
