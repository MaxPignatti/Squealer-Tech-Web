<!DOCTYPE html>
<html lang="it">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>My JavaScript App</title>
		<link
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<script>
			const userData = JSON.parse(localStorage.getItem("userData"));
			if (!userData) {
				window.location.href = "../loginPage/index.html";
			} else {
				fetch(`http://localhost:3500/usr/${userData.username}`)
					.then((response) => {
						if (!response.ok) {
							throw new Error("Network response was not ok");
						}
						return response.json();
					})
					.then((userDetails) => {
						if (!userDetails.isMod) {
							localStorage.removeItem("userData");
							window.location.href = "../loginPage/index.html";
						}
					})
					.catch((error) => {
						console.error(
							"Errore durante il recupero dei dettagli dell'utente:",
							error
						);
					});
			}
		</script>
	</head>
	<body>
		<!-- Navbar -->
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<a
				class="navbar-brand"
				href="#"
				>Squealer</a
			>
			<button
				class="navbar-toggler"
				type="button"
				data-toggle="collapse"
				data-target="#navbarNav"
				aria-controls="navbarNav"
				aria-expanded="false"
				aria-label="Toggle navigation"
			>
				<span class="navbar-toggler-icon"></span>
			</button>
			<div
				class="collapse navbar-collapse"
				id="navbarNav"
			>
				<ul class="navbar-nav ml-auto">
					<li class="nav-item">
						<a
							class="nav-link"
							id="logoutLink"
							href="#"
							>Logout</a
						>
					</li>
				</ul>
			</div>
		</nav>

		<div class="container mt-5">
			<h1 class="text-center">User Management Dashboard</h1>
			<div class="filter-section mt-3">
				<input
					type="text"
					id="nameFilter"
					placeholder="Filter by Name"
					class="form-control"
					oninput="filterUsersByName()"
				/>

				<button
					id="nameAsc"
					class="btn"
				>
					Name Asc
				</button>
				<button
					id="nameDesc"
					class="btn"
				>
					Name Desc
				</button>
				<button
					id="typeAsc"
					class="btn"
				>
					Type Asc
				</button>
				<button
					id="typeDesc"
					class="btn"
				>
					Type Desc
				</button>
				<button
					id="popularityAsc"
					class="btn"
				>
					Popularity Asc
				</button>
				<button
					id="popularityDesc"
					class="btn"
				>
					Popularity Desc
				</button>
			</div>
			<div
				id="userList"
				class="container mt-4"
			></div>
		</div>
		<script src="script.js"></script>
	</body>
</html>
